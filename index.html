<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>å‹‰å¼·ç¿’æ…£</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont;
      padding: 20px;
    }
    button {
      padding: 10px 16px;
      margin-right: 8px;
      font-size: 16px;
    }
  </style>
</head>

<body>

<h2>ä»Šæ—¥ã¯å‹‰å¼·ã§ããŸï¼Ÿ</h2>

<button onclick="done()">ã§ããŸ</button>
<button onclick="notDone()">ã§ããªã‹ã£ãŸ</button>

<p id="message"></p>
<p id="streak"></p>

<script>
  // ä»Šæ—¥ã®æ—¥ä»˜ï¼ˆYYYY-MM-DDï¼‰
  const today = new Date().toISOString().split("T")[0];

  // ä¿å­˜ãƒ‡ãƒ¼ã‚¿å–å¾—
  let lastDate = localStorage.getItem("lastDate");
  let streak = Number(localStorage.getItem("streak")) || 0;

  // è¡¨ç¤ºæ›´æ–°
  function updateView() {
    document.getElementById("streak").innerText =
      "ğŸ”¥ é€£ç¶šè¨˜éŒ²ï¼š" + streak + "æ—¥";
  }

  updateView();

  function done() {
    if (lastDate !== today) {
      streak += 1;
      localStorage.setItem("streak", streak);
      localStorage.setItem("lastDate", today);
      lastDate = today;
    }

    document.getElementById("message").innerText =
      "ä»Šæ—¥ã®ä¸€æ­©ã€ã¡ã‚ƒã‚“ã¨æœªæ¥ã«ã¤ãªãŒã£ã¦ã‚‹ã‚ˆã€‚";

    updateView();
  }

  function notDone() {
    streak = 0;
    localStorage.setItem("streak", streak);
    localStorage.setItem("lastDate", today);

    document.getElementById("message").innerText =
      "ä»Šæ—¥ã¯ã§ããªã‹ã£ãŸã­ã€‚ã§ã‚‚ã€ã¾ãŸæ˜æ—¥ã§ã„ã„ã€‚";

    updateView();
  }
</script>

</body>
</html>
